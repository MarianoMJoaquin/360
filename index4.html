<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Visor 360° - Toyota</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Roboto', sans-serif;
    }
  </style>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen p-4">
  <div class="flex bg-white p-5 rounded-lg flex-col md:flex-row space-y-4 md:space-y-0 md:space-x-8 w-full max-w-4xl shadow-lg">
    <!-- Columna Izquierda -->
    <div class="flex flex-col items-center space-y-4 w-full md:w-2/3">
      <!-- Selector de modelo -->
      <select id="modelSelector" class="mb-4 p-2 rounded-md border border-gray-300 shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500">
        <option value="corolla">Corolla</option>
        <option value="yaris_hatchback">Yaris</option>
        <option value="hilux_cabina_doble">Hilux Cabina Doble</option>
      </select>

      <!-- Tabs de versión -->
      <div id="versionTabs" class="flex justify-center md:justify-start space-x-2 md:space-x-4 mb-4"></div>

      <!-- Visor 360° -->
      <div id="viewer" class="viewer-container w-full h-[200px] md:h-[316px] overflow-hidden cursor-grab bg-cover bg-no-repeat"></div>

      <div class="flex justify-center space-x-4 font-semibold italic text-gray-600">
        <p>Arrastra para girar</p>
      </div>

      <!-- Selectores de Color -->
      <div id="colorButtons" class="flex justify-center space-x-2 md:space-x-4"></div>
      <p id="selectedColorName" class="text-center font-semibold mt-2 text-gray-700"></p>
    </div>

    <!-- Columna Derecha -->
    <div class="flex flex-col space-y-4 w-full md:w-1/3 justify-center items-center">
      <div id="subversionTabs" class="flex justify-center space-x-2"></div>
      <div class="bg-white p-4 rounded-lg shadow-md w-full">
        <h2 class="text-lg md:text-xl font-semibold mb-2 text-gray-800">Descripción</h2>
        <ul id="descriptionList" class="list-disc pl-5 text-sm md:text-base text-gray-700"></ul>
      </div>
    </div>
  </div>

  <script>
    const totalFrames = 30;
    const frameWidthPercentage = 100 / totalFrames;

    const subversionDescriptions = {
      corolla: {
        "2.0 XLI CVT": ["Transmisión manual", "5 velocidades", "Tracción delantera"],
        "2.0 XEI CVT": ["Transmisión automática", "6 velocidades", "Tracción delantera"],
        "2.0 SEG CVT": ["Transmisión GR", "6 velocidades deportivas", "Tracción trasera"]
      },
      yaris_hatchback: {
        "XS 1.5 6M/T 5P": ["Transmisión manual", "5 velocidades", "Tracción delantera"],
        "XS 1.5 CVT 5P": ["Transmisión CVT", "7 velocidades", "Tracción delantera"],
        "XLS 1.5 6M/T 5P": ["Transmisión manual", "5 velocidades", "Tracción delantera"],
        "XLS 1.5 CVT 5P": ["Transmisión CVT", "7 velocidades", "Tracción delantera"],
        "XLS+ 1.5 CVT 5P": ["Transmisión CVT", "7 velocidades", "Tracción delantera"],
        "XLS PACK 1.5 CVT 5P": ["Transmisión CVT", "7 velocidades", "Tracción delantera"],
        "S 1.5 CVT 5P": ["Transmisión CVT", "7 velocidades", "Tracción delantera"]
      },
      hilux_cabina_doble: {
        "DX 4X2/4X4 6MT": ["Transmisión manual", "6 velocidades", "Tracción 4x4"],
        "DX 4X2/4X4 6AT": ["Transmisión automática", "6 velocidades", "Tracción 4x4"],
        "SR 4X2/4X4 6MT": ["Transmisión manual", "6 velocidades", "Tracción 4x4"],
        "SR 4X2/4X4 6AT": ["Transmisión automática", "6 velocidades", "Tracción 4x4"],
        "SRV 4X2/4X4 6AT": ["Transmisión automática", "6 velocidades", "Tracción 4x4"],
        "SRX 4X2/4X4 6AT": ["Transmisión automática", "6 velocidades", "Tracción 4x4"]
      },
      hilux_cabina_simple: {
        "DX 4X2/4X4 MT": ["Transmisión manual", "6 velocidades", "Tracción 4x4"]
      },
      hilux_chasis_cabina: {
        "DX 4X2/4X4 MT": ["Transmisión manual", "6 velocidades", "Tracción 4x4"]
      }
    };

    const colors = {
      corolla: {
        xli: {
          "2.0 XLI CVT": [
            { name: "Rojo Metalizado", code: "red", hex: "#AC1625" },
            { name: "Negro Mica", code: "black", hex: "#292826" },
            { name: "Super Blanco", code: "white", hex: "#F8F8F8" },
            { name: "Gris Azulado", code: "blue", hex: "#61727B" },
            { name: "Blanco Perlado", code: "white-perl", hex: "#DBDAD6" },
            { name: "Gris Oscuro", code: "gray", hex: "#746D67" },
            { name: "Gris Plata", code: "silver", hex: "#DCDCDE" }
          ]
        },
        xei: {
          "2.0 XEI CVT": [
            { name: "Rojo Metalizado", code: "red", hex: "#AC1625" },
            { name: "Negro Mica", code: "black", hex: "#292826" },
            { name: "Super Blanco", code: "white", hex: "#F8F8F8" },
            { name: "Gris Azulado", code: "blue", hex: "#61727B" },
            { name: "Blanco Perlado", code: "white-perl", hex: "#DBDAD6" },
            { name: "Gris Oscuro", code: "gray", hex: "#746D67" },
            { name: "Gris Plata", code: "silver", hex: "#DCDCDE" }
          ]
        },
        seg: {
          "2.0 SEG CVT": [
            { name: "Rojo Metalizado", code: "red", hex: "#AC1625" },
            { name: "Negro Mica", code: "black", hex: "#292826" },
            { name: "Super Blanco", code: "white", hex: "#F8F8F8" },
            { name: "Gris Azulado", code: "blue", hex: "#61727B" },
            { name: "Blanco Perlado", code: "white-perl", hex: "#DBDAD6" },
            { name: "Gris Oscuro", code: "gray", hex: "#746D67" },
            { name: "Gris Plata", code: "silver", hex: "#DCDCDE" }
          ]
        }
      },
      hilux_cabina_doble: {
        dx: {
          "DX 4X2/4X4 6MT": [
            { name: "Plata Metalizado", code: "silver", hex: "#D3D3D3" },
            { name: "Negro Mica", code: "black", hex: "#191919" },
            { name: "Gris Oscuro Metalizado", code: "gray", hex: "#A6A6A6" },
            { name: "Super Blanco", code: "white", hex: "#F1F1EF" },
            { name: "Rojo Metalizado", code: "red", hex: "#8A0309" }
          ],
          "DX 4X2/4X4 6AT": [
            { name: "Plata Metalizado", code: "silver", hex: "#D3D3D3" },
            { name: "Negro Mica", code: "black", hex: "#191919" },
            { name: "Gris Oscuro Metalizado", code: "gray", hex: "#A6A6A6" },
            { name: "Super Blanco", code: "white", hex: "#F1F1EF" },
            { name: "Rojo Metalizado", code: "red", hex: "#8A0309" }
          ]
        },
        sr: {
          "SR 4X2/4X4 6MT": [
            { name: "Plata Metalizado", code: "silver", hex: "#D3D3D3" },
            { name: "Negro Mica", code: "black", hex: "#191919" },
            { name: "Gris Oscuro Metalizado", code: "gray", hex: "#A6A6A6" },
            { name: "Super Blanco", code: "white", hex: "#F1F1EF" },
            { name: "Rojo Metalizado", code: "red", hex: "#8A0309" }
          ],
          "SR 4X2/4X4 6AT": [
            { name: "Plata Metalizado", code: "silver", hex: "#D3D3D3" },
            { name: "Negro Mica", code: "black", hex: "#191919" },
            { name: "Gris Oscuro Metalizado", code: "gray", hex: "#A6A6A6" },
            { name: "Super Blanco", code: "white", hex: "#F1F1EF" },
            { name: "Rojo Metalizado", code: "red", hex: "#8A0309" }
          ]
        },
        srv: {
          "SRV 4X2/4X4 6AT": [
            { name: "Plata Metalizado", code: "silver", hex: "#D3D3D3" },
            { name: "Negro Mica", code: "black", hex: "#191919" },
            { name: "Gris Oscuro Metalizado", code: "gray", hex: "#A6A6A6" },
            { name: "Super Blanco", code: "white", hex: "#F1F1EF" },
            { name: "Rojo Metalizado", code: "red", hex: "#8A0309" },
            { name: "Blanco Perlado", code: "white-perl", hex: "#E9E8E3" }
          ]
        },
        srx: {
          "SRX 4X2/4X4 6AT": [
            { name: "Plata Metalizado", code: "silver", hex: "#D3D3D3" },
            { name: "Negro Mica", code: "black", hex: "#191919" },
            { name: "Gris Oscuro Metalizado", code: "gray", hex: "#A6A6A6" },
            { name: "Super Blanco", code: "white", hex: "#F1F1EF" },
            { name: "Rojo Metalizado", code: "red", hex: "#8A0309" }
          ]
        }
      },
      hilux_cabina_simple: {
        dx: {
          "DX 4X2/4X4 MT": [
            { name: "Plata Metalizado", code: "silver", hex: "#D3D3D3" },
            { name: "Negro Mica", code: "black", hex: "#191919" },
            { name: "Gris Oscuro Metalizado", code: "gray", hex: "#A6A6A6" },
            { name: "Super Blanco", code: "white", hex: "#F1F1EF" },
            { name: "Rojo Metalizado", code: "red", hex: "#8A0309" }
          ]
        }
      },
      hilux_chasis_cabina: {
        dx: {
          "DX 4X2/4X4 MT": [
            { name: "Plata Metalizado", code: "silver", hex: "#D3D3D3" },
            { name: "Negro Mica", code: "black", hex: "#191919" },
            { name: "Gris Oscuro Metalizado", code: "gray", hex: "#A6A6A6" },
            { name: "Super Blanco", code: "white", hex: "#F1F1EF" },
            { name: "Rojo Metalizado", code: "red", hex: "#8A0309" }
          ]
        }
      },
      corolla_hybrid: {
        xei: {
          "HEV 1.8 XEI eCVT": [
            { name: "Rojo Metalizado", code: "red", hex: "#AC1625" },
            { name: "Negro Mica", code: "black", hex: "#292826" },
            { name: "Super Blanco", code: "white", hex: "#F8F8F8" },
            { name: "Gris Azulado", code: "blue", hex: "#61727B" },
            { name: "Blanco Perlado", code: "white-perl", hex: "#DBDAD6" },
            { name: "Gris Oscuro", code: "gray", hex: "#746D67" },
            { name: "Gris Plata", code: "silver", hex: "#DCDCDE" }
          ]
        },
        seg: {
          "HEV 1.8 SEG eCVT": [
            { name: "Rojo Metalizado", code: "red", hex: "#AC1625" },
            { name: "Negro Mica", code: "black", hex: "#292826" },
            { name: "Super Blanco", code: "white", hex: "#F8F8F8" },
            { name: "Gris Azulado", code: "blue", hex: "#61727B" },
            { name: "Blanco Perlado", code: "white-perl", hex: "#DBDAD6" },
            { name: "Gris Oscuro", code: "gray", hex: "#746D67" },
            { name: "Gris Plata", code: "silver", hex: "#DCDCDE" }
          ]
        }
      },
      corolla_gr_sport: {
        "gr-sport": {
          "2.0 CVT": [
            { name: "Negro Mica", code: "black", hex: "#191919" },
            { name: "Blanco Perlado Bitono", code: "white-perl", hex: "#D1D0CE" },
            { name: "Rojo Metalizado Bitono", code: "red", hex: "#8A0309" }
          ]
        }
      },
      yaris_hatchback: {
        xs: {
          "XS 1.5 6M/T 5P": [
            { name: "Rojo Metalizado", code: "red", hex: "#AC1625" },
            { name: "Negro Mica", code: "black", hex: "#292826" },
            { name: "Super Blanco", code: "white", hex: "#F8F8F8" },
            { name: "Gris Azulado", code: "blue", hex: "#61727B" },
            { name: "Blanco Perlado", code: "white-perl", hex: "#DBDAD6" },
            { name: "Gris Oscuro", code: "gray", hex: "#746D67" },
            { name: "Gris Plata", code: "silver", hex: "#DCDCDE" }
          ],
          "XS 1.5 CVT 5P": [
            { name: "Gris Azulado", code: "blue", hex: "#61727B" },
          ]
        },
        xls: {
          "XLS 1.5 6M/T 5P": [
            { name: "Rojo Metalizado", code: "red", hex: "#AC1625" },
            { name: "Negro Mica", code: "black", hex: "#292826" },
            { name: "Super Blanco", code: "white", hex: "#F8F8F8" },
            { name: "Gris Azulado", code: "blue", hex: "#61727B" },
            { name: "Blanco Perlado", code: "white-perl", hex: "#DBDAD6" },
            { name: "Gris Oscuro", code: "gray", hex: "#746D67" },
            { name: "Gris Plata", code: "silver", hex: "#DCDCDE" }
          ],
          "XLS 1.5 CVT 5P": [
            { name: "Rojo Metalizado", code: "red", hex: "#AC1625" },
            { name: "Negro Mica", code: "black", hex: "#292826" },
            { name: "Super Blanco", code: "white", hex: "#F8F8F8" },
            { name: "Gris Azulado", code: "blue", hex: "#61727B" },
            { name: "Blanco Perlado", code: "white-perl", hex: "#DBDAD6" },
            { name: "Gris Oscuro", code: "gray", hex: "#746D67" },
            { name: "Gris Plata", code: "silver", hex: "#DCDCDE" }
          ],
          "XLS+ 1.5 CVT 5P": [
            { name: "Rojo Metalizado", code: "red", hex: "#AC1625" },
            { name: "Negro Mica", code: "black", hex: "#292826" },
            { name: "Super Blanco", code: "white", hex: "#F8F8F8" },
            { name: "Gris Azulado", code: "blue", hex: "#61727B" },
            { name: "Blanco Perlado", code: "white-perl", hex: "#DBDAD6" },
            { name: "Gris Oscuro", code: "gray", hex: "#746D67" },
            { name: "Gris Plata", code: "silver", hex: "#DCDCDE" }
          ],
          "XLS PACK 1.5 CVT 5P": [
            { name: "Rojo Metalizado", code: "red", hex: "#AC1625" },
            { name: "Negro Mica", code: "black", hex: "#292826" },
            { name: "Super Blanco", code: "white", hex: "#F8F8F8" },
            { name: "Gris Azulado", code: "blue", hex: "#61727B" },
            { name: "Blanco Perlado", code: "white-perl", hex: "#DBDAD6" },
            { name: "Gris Oscuro", code: "gray", hex: "#746D67" },
            { name: "Gris Plata", code: "silver", hex: "#DCDCDE" }
          ]
        },
        s: {
          "S 1.5 CVT 5P": [
            { name: "Rojo Metalizado", code: "red", hex: "#AC1625" },
            { name: "Negro Mica", code: "black", hex: "#292826" },
            { name: "Super Blanco", code: "white", hex: "#F8F8F8" },
            { name: "Gris Azulado", code: "blue", hex: "#61727B" },
            { name: "Blanco Perlado", code: "white-perl", hex: "#DBDAD6" },
            { name: "Gris Oscuro", code: "gray", hex: "#746D67" },
            { name: "Gris Plata", code: "silver", hex: "#DCDCDE" }
          ]
        }
      },
      yaris_sedan: {
        xls: {
          "XLS 1.5 6M/T 4P": [
            { name: "Rojo Metalizado", code: "red", hex: "#AC1625" },
            { name: "Negro Mica", code: "black", hex: "#292826" },
            { name: "Super Blanco", code: "white", hex: "#F8F8F8" },
            { name: "Gris Azulado", code: "blue", hex: "#61727B" },
            { name: "Blanco Perlado", code: "white-perl", hex: "#DBDAD6" },
            { name: "Gris Oscuro", code: "gray", hex: "#746D67" },
            { name: "Gris Plata", code: "silver", hex: "#DCDCDE" }
          ],
          "XLS 1.5 CVT 4P": [
            { name: "Rojo Metalizado", code: "red", hex: "#AC1625" },
            { name: "Negro Mica", code: "black", hex: "#292826" },
            { name: "Super Blanco", code: "white", hex: "#F8F8F8" },
            { name: "Gris Azulado", code: "blue", hex: "#61727B" },
            { name: "Blanco Perlado", code: "white-perl", hex: "#DBDAD6" },
            { name: "Gris Oscuro", code: "gray", hex: "#746D67" },
            { name: "Gris Plata", code: "silver", hex: "#DCDCDE" }
          ],
          "XLS PACK 1.5 CVT 4P": [
            { name: "Rojo Metalizado", code: "red", hex: "#AC1625" },
            { name: "Negro Mica", code: "black", hex: "#292826" },
            { name: "Super Blanco", code: "white", hex: "#F8F8F8" },
            { name: "Gris Azulado", code: "blue", hex: "#61727B" },
            { name: "Blanco Perlado", code: "white-perl", hex: "#DBDAD6" },
            { name: "Gris Oscuro", code: "gray", hex: "#746D67" },
            { name: "Gris Plata", code: "silver", hex: "#DCDCDE" }
          ]
        }
      },
      hilux_gr_sport_iv: {
        "gr-sport-iv": {
          "4X4": [
            { name: "Negro Mica", code: "black", hex: "#191919" },
            { name: "Gris Oscuro Metalizado", code: "gray", hex: "#A6A6A6" },
            { name: "Blanco Perlado Bitono", code: "white-perl", hex: "#D1D0CE" },
            { name: "Rojo Metalizado Bitono", code: "red", hex: "#8A0309" }
          ]
        }
      },
      corolla_cross: {
        xli: {
          "XLI 2.0 CVT": [
            { name: "Rojo Metalizado", code: "red", hex: "#AC1625" },
            { name: "Negro Mica", code: "black", hex: "#292826" },
            { name: "Super Blanco", code: "white", hex: "#F8F8F8" },
            { name: "Azul Oscuro Metalizado", code: "blue", hex: "#00022E" },
            { name: "Blanco Perlado", code: "white-perl", hex: "#DBDAD6" },
            { name: "Gris Oscuro", code: "gray", hex: "#746D67" },
            { name: "Gris Plata", code: "silver", hex: "#DCDCDE" }
          ]
        },
        xei: {
          "XEI 2.0 CVT": [
            { name: "Rojo Metalizado", code: "red", hex: "#AC1625" },
            { name: "Negro Mica", code: "black", hex: "#292826" },
            { name: "Super Blanco", code: "white", hex: "#F8F8F8" },
            { name: "Azul Oscuro Metalizado", code: "blue", hex: "#00022E" },
            { name: "Blanco Perlado", code: "white-perl", hex: "#DBDAD6" },
            { name: "Gris Oscuro", code: "gray", hex: "#746D67" },
            { name: "Gris Plata", code: "silver", hex: "#DCDCDE" }
          ]
        },
        seg: {
          "SEG 2.0 CVT": [
            { name: "Rojo Metalizado", code: "red", hex: "#AC1625" },
            { name: "Negro Mica", code: "black", hex: "#292826" },
            { name: "Super Blanco", code: "white", hex: "#F8F8F8" },
            { name: "Azul Oscuro Metalizado", code: "blue", hex: "#00022E" },
            { name: "Blanco Perlado", code: "white-perl", hex: "#DBDAD6" },
            { name: "Gris Oscuro", code: "gray", hex: "#746D67" },
            { name: "Gris Plata", code: "silver", hex: "#DCDCDE" }
          ]
        }
      },
      corolla_cross_hybrid: {
        xei: {
          "XEI HEV 1.8 eCVT": [
            { name: "Rojo Metalizado", code: "red", hex: "#AC1625" },
            { name: "Negro Mica", code: "black", hex: "#292826" },
            { name: "Super Blanco", code: "white", hex: "#F8F8F8" },
            { name: "Azul Oscuro Metalizado", code: "blue", hex: "#00022E" },
            { name: "Blanco Perlado", code: "white-perl", hex: "#DBDAD6" },
            { name: "Gris Oscuro", code: "gray", hex: "#746D67" },
            { name: "Gris Plata", code: "silver", hex: "#DCDCDE" }
          ]
        },
        seg: {
          "SEG HEV 1.8 eCVT": [
            { name: "Rojo Metalizado", code: "red", hex: "#AC1625" },
            { name: "Negro Mica", code: "black", hex: "#292826" },
            { name: "Super Blanco", code: "white", hex: "#F8F8F8" },
            { name: "Azul Oscuro Metalizado", code: "blue", hex: "#00022E" },
            { name: "Blanco Perlado", code: "white-perl", hex: "#DBDAD6" },
            { name: "Gris Oscuro", code: "gray", hex: "#746D67" },
            { name: "Gris Plata", code: "silver", hex: "#DCDCDE" }
          ]
        }
      },
      corolla_cross_gr_sport: {
        "gr-sport": {
          "2.0 CVT GR-SPORT": [
            { name: "Blanco Bitono", code: "white-perl", hex: "#BEC3BF" },
            { name: "Rojo Bitono", code: "red", hex: "#9B1823" }
          ]
        }
      },
      sw4: {
        srx: {
          "SRX 4X4 6AT 7A": [
            { name: "Negro Mica", code: "black", hex: "#292826" },
            { name: "Super Blanco", code: "white", hex: "#F8F8F8" },
            { name: "Azul Oscuro Metalizado", code: "blue", hex: "#00022E" },
            { name: "Blanco Perlado", code: "white-perl", hex: "#DBDAD6" },
            { name: "Gris Oscuro", code: "gray", hex: "#746D67" },
            { name: "Gris Plata", code: "silver", hex: "#DCDCDE" }
          ]
        },
        diamond: {
          "DIAMOND 4X4 6AT 7A": [
            { name: "Blanco Perlado", code: "white-perl", hex: "#DBDAD6" },
            { name: "Negro Mica", code: "black", hex: "#292826" }
          ]
        }
      },
      sw4_gr_sport: {
        "gr-sport": {
          "4X4 6AT 7A": [
            { name: "Blanco Perlado", code: "white-perl", hex: "#DBDAD6" },
            { name: "Negro Mica", code: "black", hex: "#292826" }
          ]
        }
      },
      hiace_furgon: {
        l1h1: {
          "2.8 TDI 6AT 3A": [
            { name: "Blanco", code: "white", hex: "#FFFFFF" }
          ]
        },
        l2h2: {
          "2.8 TDI 6AT 3A": [
            { name: "Blanco", code: "white", hex: "#FFFFFF" }
          ]
        }
      },
      hiace_commuter: {
        commuter: {
          "2.8 TDI 6AT 14A": [
            { name: "Blanco", code: "white", hex: "#FFFFFF" }
          ]
        }
      },
      hiace_wagon: {
        wagon: {
          "2.8 TDI 6AT 10A": [
            { name: "Blanco", code: "white", hex: "#FFFFFF" }
          ]
        }
      }
    };

    const versions = {
      corolla: [
        { name: "XLI", slug: "xli", subversions: ["2.0 XLI CVT"] },
        { name: "XEI", slug: "xei", subversions: ["2.0 XEI CVT"] },
        { name: "SEG", slug: "seg", subversions: ["2.0 SEG CVT"] }
      ],
      corolla_hybrid: [
        { name: "XEI", slug: "xei", subversions: ["HEV 1.8 XEI eCVT"] },
        { name: "SEG", slug: "seg", subversions: ["HEV 1.8 SEG eCVT"] }
      ],
      corolla_gr_sport: [
        { name: "GR-Sport", slug: "gr-sport", subversions: ["2.0 CVT"] }
      ],
      yaris_hatchback: [
        { name: "XS", slug: "xs", subversions: ["XS 1.5 6M/T 5P", "XS 1.5 CVT 5P"] },
        { name: "XLS", slug: "xls", subversions: ["XLS 1.5 6M/T 5P", "XLS 1.5 CVT 5P", "XLS+ 1.5 CVT 5P", "XLS PACK 1.5 CVT 5P"] },
        { name: "S", slug: "s", subversions: ["S 1.5 CVT 5P"] },
      ],
      yaris_sedan: [
        { name: "XLS", slug: "xls", subversions: ["XLS 1.5 6M/T 4P", "XLS 1.5 CVT 4P", "XLS PACK 1.5 CVT 4P"] }
      ],
      hilux_cabina_doble: [
        { name: "DX", slug: "dx", subversions: ["DX 4X2/4X4 6MT", "DX 4X2/4X4 6AT"] },
        { name: "SR", slug: "sr", subversions: ["SR 4X2/4X4 6MT", "SR 4X2/4X4 6AT"] },
        { name: "SRV", slug: "srv", subversions:["SRV 4X2/4X4 6AT"] },
        { name: "SRX", slug: "srx", subversions:["SRX 4X2/4X4 6AT"] }
      ],
      hilux_cabina_simple: [
        { name: "DX", slug: "dx", subversions: ["DX 4X2/4X4 MT"] }
      ],
      hilux_chasis_cabina: [
        { name: "DX", slug: "dx", subversions: ["DX 4X2/4X4 MT"] }
      ],
      hilux_gr_sport_iv: [
        { name: "GR-Sport IV", slug: "gr-sport-iv", subversions: ["4X4"] }
      ],
      corolla_cross: [
        { name: "XLI", slug: "xli", subversions: ["XLI 2.0 CVT"] },
        { name: "XEI", slug: "xei", subversions: ["XEI 2.0 CVT"] },
        { name: "SEG", slug: "seg", subversions: ["SEG 2.0 CVT"] }
      ],
      corolla_cross_hybrid: [
        { name: "XEI", slug: "xei", subversions: ["XEI HEV 1.8 eCVT"] },
        { name: "SEG", slug: "seg", subversions: ["SEG HEV 1.8 eCVT"] }
      ],
      corolla_cross_gr_sport: [
        { name: "GR-Sport", slug: "gr-sport", subversions: ["2.0 CVT GR-SPORT"] }
      ],
      sw4: [
        { name: "SRX", slug: "srx", subversions: ["SRX 4X4 6AT 7A"] },
        { name: "DIAMOND", slug: "diamond", subversions: ["DIAMOND 4X4 6AT 7A"] }
      ],
      sw4_gr_sport: [
        { name: "GR-Sport", slug: "gr-sport", subversions: ["4X4 6AT 7A"] }
      ],
      hiace_furgon: [
        { name: "L1H1", slug: "l1h1", subversions: ["2.8 TDI 6AT 3A"] },
        { name: "L2H2", slug: "l2h2", subversions: ["2.8 TDI 6AT 3A"] }
      ],
      hiace_commuter: [
        { name: "Commuter", slug: "commuter", subversions: ["2.8 TDI 6AT 14A"] }
      ],
      hiace_wagon: [
        { name: "Wagon", slug: "wagon", subversions: ["2.8 TDI 6AT 10A "] }
      ],
    };

    let currentModel = "corolla";
    let currentVersion = "xli";
    let currentColor = "red";
    let currentSubversion = "2.0 XLI CVT";
    let currentFrame = 0;
    let isDragging = false;
    let startX = 0;

    const modelSelector = document.getElementById("modelSelector");
    const versionTabs = document.getElementById("versionTabs");
    const colorButtons = document.getElementById("colorButtons");
    const subversionTabs = document.getElementById("subversionTabs");
    const descriptionList = document.getElementById("descriptionList");
    const viewer = document.getElementById("viewer");

    const imageCache = new Map();

    modelSelector.addEventListener("change", (event) => {
      currentModel = event.target.value;
      currentVersion = versions[currentModel][0].slug;
      currentSubversion = versions[currentModel][0].subversions[0];
      currentColor = colors[currentModel][currentVersion][currentSubversion][0].code;
      currentFrame = 0; // Reset to initial frame
      initialize();
      preloadImages();
    });

    function initialize() {
      renderVersionTabs();
      renderColorButtons();
      renderSubversionTabs();
      updateSprite();
      updateDescription();
    }

    function preloadImages() {
      const imageUrls = [];
      versions[currentModel].forEach(version => {
        version.subversions.forEach(subversion => {
          colors[currentModel][version.slug][subversion].forEach(color => {
            const imageUrl = `${currentModel}/${currentModel}-${version.slug}-${color.code}.png`;
            imageUrls.push(imageUrl);
            if (!imageCache.has(imageUrl)) {
              const img = new Image();
              img.src = imageUrl;
              imageCache.set(imageUrl, img);
            }
          });
        });
      });
    }

    // Inicializar la aplicación al cargar la página y precargar las imágenes para una carga más rápida de los sprites.
    window.addEventListener('load', () => {
      initialize();
      preloadImages();
    });

    // Renderizar tabs de versiones
    function renderVersionTabs() {
      versionTabs.innerHTML = "";
      versions[currentModel].forEach((version) => {
        const button = document.createElement("button");
        button.textContent = version.name;
        button.className = `version-tab px-4 py-2 font-semibold transition-transform duration-200 border-b-2 ${
          currentVersion === version.slug ? "border-gray-800 text-gray-800" : "border-transparent text-gray-500 hover:border-gray-400"
        }`;
        button.addEventListener("click", () => {
          currentVersion = version.slug;
          currentSubversion = version.subversions[0];
          currentColor = colors[currentModel][currentVersion][currentSubversion][0].code;
          updateActiveVersionButton();
          renderSubversionTabs();
          renderColorButtons();
          updateSprite();
          updateDescription();
        });
        button.dataset.version = version.slug;
        versionTabs.appendChild(button);
      });
    }

    // Actualizar estado activo de versiones
    function updateActiveVersionButton() {
      document.querySelectorAll(".version-tab").forEach((button) => {
        if (button.dataset.version === currentVersion) {
          button.classList.add("border-gray-800", "text-gray-800");
          button.classList.remove("border-transparent", "text-gray-500", "hover:border-gray-400");
        } else {
          button.classList.add("border-transparent", "text-gray-500", "hover:border-gray-400");
          button.classList.remove("border-gray-800", "text-gray-800");
        }
      });
    }

    // Renderizar tabs de subversiones
    function renderSubversionTabs() {
      const version = versions[currentModel].find((v) => v.slug === currentVersion);
      if (!version) return;

      subversionTabs.innerHTML = "";
      version.subversions.forEach((subversion) => {
        const tab = document.createElement("button");
        tab.textContent = subversion.toUpperCase();
        tab.className = `subversion-tab text-xs px-4 py-2 font-semibold transition-transform duration-200 border-b-2 ${
          currentSubversion === subversion ? "border-gray-800 text-gray-800" : "border-transparent text-gray-500 hover:border-gray-400"
        }`;
        tab.dataset.subversion = subversion;
        tab.addEventListener("click", () => {
          currentSubversion = subversion;
          currentColor = colors[currentModel][currentVersion][currentSubversion][0].code;
          updateActiveSubversionButton();
          renderColorButtons();
          updateSprite();
          updateDescription();
        });
        subversionTabs.appendChild(tab);
      });
    }

    // Actualizar estado activo de subversiones
    function updateActiveSubversionButton() {
      document.querySelectorAll(".subversion-tab").forEach((tab) => {
        if (tab.dataset.subversion === currentSubversion) {
          tab.classList.add("border-gray-800", "text-gray-800");
          tab.classList.remove("border-transparent", "text-gray-500", "hover:border-gray-400");
        } else {
          tab.classList.add("border-transparent", "text-gray-500", "hover:border-gray-400");
          tab.classList.remove("border-gray-800", "text-gray-800");
        }
      });
    }

    // Renderizar botones de colores
    function renderColorButtons() {
      colorButtons.innerHTML = "";
      colors[currentModel][currentVersion][currentSubversion].forEach((color) => {
        const button = document.createElement("button");
        button.className = `w-8 h-8 rounded-full border-2 border-gray-300 hover:scale-110 transition-transform duration-200`;
        button.style.backgroundColor = color.hex;
        button.addEventListener("click", () => {
          currentColor = color.code;
          updateSprite();
          updateSelectedColorName(color.name);
        });
        colorButtons.appendChild(button);
      });
      updateSelectedColorName(colors[currentModel][currentVersion][currentSubversion][0].name);
    }

    function updateSelectedColorName(colorName) {
      const selectedColorNameElement = document.getElementById("selectedColorName");
      selectedColorNameElement.textContent = `Color seleccionado: ${colorName}`;
    }

    // Actualizar sprite del visor
    function updateSprite() {
      viewer.classList.add("transition-all", "duration-200");
      viewer.style.backgroundImage = `url('${currentModel}/${currentModel}-${currentVersion}-${currentColor}.png')`;
      viewer.style.backgroundSize = "3000%";
      viewer.style.backgroundPosition = `${currentFrame * frameWidthPercentage}% 0`;
      setTimeout(() => {
        viewer.classList.remove("transition-all", "duration-200");
      }, 200); // 200ms es la duración de la transición en CSS para que el cambio de sprite sea suave y coincida con la animación de desplazamiento del visor en el eje X (horizontal).
    }

    // Actualizar descripción
    function updateDescription() {
      descriptionList.innerHTML = "";
      subversionDescriptions[currentModel][currentSubversion].forEach((item) => {
        const li = document.createElement("li");
        li.textContent = item;
        descriptionList.appendChild(li);
      });
    }

    // Mantener la función updateFrame original para que el desplazamiento funcione adecuadamente
    function updateFrame(diffX) {
      if (diffX > 20) {
        currentFrame = (currentFrame + 1) % totalFrames;
        startX += 20;
      } else if (diffX < -20) {
        currentFrame = (currentFrame - 1 + totalFrames) % totalFrames;
        startX -= 20;
      }
      const offsetX = currentFrame * frameWidthPercentage;
      viewer.style.backgroundPosition = `${offsetX}% 0`;
    }

    function animate() {
      if (isDragging) {
        requestAnimationFrame(animate);
      }
    }

    viewer.addEventListener('mousedown', (event) => {
      isDragging = true;
      startX = event.pageX;
      viewer.classList.add("cursor-grabbing");
      requestAnimationFrame(animate);
    });

    viewer.addEventListener('mouseup', () => {
      isDragging = false;
      viewer.classList.remove("cursor-grabbing");
    });

    viewer.addEventListener('mouseleave', () => {
      isDragging = false;
      viewer.classList.remove("cursor-grabbing");
    });

    viewer.addEventListener('mousemove', (event) => {
      if (isDragging) {
        const diffX = event.pageX - startX;
        updateFrame(diffX);
      }
    });

    // Soporte para dispositivos táctiles
    viewer.addEventListener('touchstart', (event) => {
      isDragging = true;
      startX = event.touches[0].pageX;
      requestAnimationFrame(animate);
    });

    viewer.addEventListener('touchend', () => {
      isDragging = false;
    });

    viewer.addEventListener('touchmove', (event) => {
      if (isDragging) {
        const diffX = event.touches[0].pageX - startX;
        updateFrame(diffX);
      }
    });

    initialize();

    /**
     * Explicación del código:
     * 1. Se definen las constantes totalFrames y frameWidthPercentage para controlar la cantidad de frames y el porcentaje de ancho de cada frame.
     * 2. Se definen los objetos subversionDescriptions y colors para almacenar las descripciones y colores de cada modelo y versión.
     * 3. Se definen los objetos versions para almacenar las versiones de cada modelo.
     * 4. Se definen las variables currentModel, currentVersion, currentColor, currentSubversion, currentFrame e isDragging para controlar el estado del visor.
     * 5. Se obtienen las referencias a los elementos HTML relevantes.
     * 6. Se añade un evento change al selector de modelos para actualizar el modelo actual y reiniciar el visor.
     * 7. Se define la función initialize para renderizar los elementos iniciales del visor.
     * 8. Se define la función renderVersionTabs para renderizar los tabs de versiones.
     * 9. Se define la función updateActiveVersionButton para actualizar el estado activo de los tabs de versiones.
     * 10. Se define la función renderSubversionTabs para renderizar los tabs de subversiones.
     * 11. Se define la función updateActiveSubversionButton para actualizar el estado activo de los tabs de subversiones.
     * 12. Se define la función renderColorButtons para renderizar los botones de colores.
     * 13. Se define la función updateSelectedColorName para actualizar el nombre del color seleccionado.
     * 14. Se define la función updateSprite para actualizar el sprite del visor.
     * 15. Se define la función updateDescription para actualizar la descripción del modelo.
     * 16. Se define la función updateFrame para actualizar el frame del visor.
     * 17. Se define la función animate para animar el visor mientras se arrastra.
     * 18. Se añaden los eventos de mousedown, mouseup, mouseleave, mousemove, touchstart, touchend y touchmove al visor para controlar el arrastre.
     * 19. Se llama a la función initialize para iniciar el visor.
     */


  </script>
</body>
</html>
